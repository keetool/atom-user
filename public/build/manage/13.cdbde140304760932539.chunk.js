(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{577:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.cardTooltip=t.DATE_MENU_VALUES=t.dateFormat=t.mainColor=t.chartScale=t.dateFormater=undefined;var r=a(1);var n=s(r);var o=a(527);var l=s(o);var i=a(578);var u=a(203);function s(e){return e&&e.__esModule?e:{default:e}}var c=t.dateFormater=function e(t){var a=(0,l.default)(t).format("D/M");return a};var f=t.chartScale={date:{type:"cat",range:[0,1]}};var d=t.mainColor="#1890ff";var p=t.dateFormat="Y-M-D";var v=t.DATE_MENU_VALUES=[{label:(0,u.translateI18n)("manage.dashboard.datepicker.7_days"),value:"3",days:7},{label:(0,u.translateI18n)("manage.dashboard.datepicker.15_days"),value:"1",days:15},{label:(0,u.translateI18n)("manage.dashboard.datepicker.30_days"),value:"2",days:30},{label:(0,u.translateI18n)("manage.dashboard.datepicker.other"),value:"4",days:30}];var m=t.cardTooltip=function e(t){return n.default.createElement(i.Tooltip,{containerTpl:'<div class="g2-tooltip"><table class="g2-tooltip-list"></table></div>',itemTpl:'<tr class="g2-tooltip-list-item"><td style="color:{color}">'+t+": </td><td>{value}</td></tr>"})}},613:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(561);var n=O(r);var o=a(541);var l=O(o);var i=a(528);var u=O(i);var s=a(779);var c=O(s);var f=a(604);var d=O(f);var p=a(560);var v=O(p);var m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a){if(Object.prototype.hasOwnProperty.call(a,r)){e[r]=a[r]}}}return e};var h=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,a,r){if(a)e(t.prototype,a);if(r)e(t,r);return t}}();a(593);a(552);a(571);a(854);a(600);a(592);var b=a(1);var y=O(b);var _=a(577);var g=a(527);var E=O(g);var w=a(93);function O(e){return e&&e.__esModule?e:{default:e}}function D(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function j(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function M(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var k=_.DATE_MENU_VALUES.map(function(e,t){return y.default.createElement(v.default.Item,{key:t},e.label)});var P=function(e){M(t,e);function t(e){D(this,t);var a=j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={showModal:false,selectedKeys:"0",selectedLabel:_.DATE_MENU_VALUES[0].label,filter:{start_time:"",end_time:""}};a.filterChange=function(e){var t=e.key;a.setState({selectedKeys:t});var r=[];if(Number(t)<3){r=[(0,E.default)(E.default.now()).subtract(_.DATE_MENU_VALUES[t].days,"days").format(_.dateFormat),(0,E.default)(E.default.now()).format(_.dateFormat)];a.setState({selectedLabel:_.DATE_MENU_VALUES[t].label});a.props.changeDate(r)}else{a.setState({showModal:true})}};a.onChangeDate=function(e){var t=m({},a.state.filter);t.start_time=e[0].format(_.dateFormat);t.end_time=e[1].format(_.dateFormat);a.setState({filter:t})};a.modalOk=function(){a.setState({showModal:false});var e=m({},a.state.filter);var t=[e.start_time,e.end_time];a.setState({selectedLabel:_.DATE_MENU_VALUES[3].label});a.props.changeDate(t)};a.hideModal=function(){a.setState({showModal:false})};return a}h(t,[{key:"render",value:function e(){var t=this.props,a=t.title,r=t.value,o=t.icon,i=t.isLoading,s=t.changeDate,f=t.t;var p=this.state,m=p.selectedKeys,h=p.selectedLabel,b=p.showModal;return y.default.createElement("div",null,y.default.createElement(c.default,{visible:b,onOk:this.modalOk,onCancel:this.hideModal,cancelText:f("manage.dashboard.modal.cancel"),okText:f("manage.dashboard.modal.ok")},y.default.createElement(d.default.RangePicker,{onChange:this.onChangeDate,format:"D-M-Y"})),i?y.default.createElement(u.default,{type:"loading"}):y.default.createElement(u.default,{type:o})," ",r," ",a,s&&!i&&y.default.createElement("div",{style:{float:"right"}},y.default.createElement(n.default,{trigger:["click"],overlay:y.default.createElement(v.default,{selectedKeys:[m],onClick:this.filterChange},k)},y.default.createElement(l.default,{size:"small"},h,y.default.createElement(u.default,{type:"down"})))))}}]);return t}(y.default.Component);t.default=(0,w.translate)(function(e){return e.namespaces})(P)},614:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a){if(Object.prototype.hasOwnProperty.call(a,r)){e[r]=a[r]}}}return e};t.getDashboard=l;var n=a(862);var o=a(570);function l(e,t){var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};e({isLoading:true});(0,n.getDashboardApi)(t,a).then(function(t){if((0,o.httpSuccess)(t.status)){var a=t.data["total"];t.data=t.data["charts"].map(function(e,t){return r({},e,{count:t%2==0?t*t*3:t*t*t})});e({isLoading:false,data:t.data,total:a})}}).catch(function(e){(0,o.messageHttpRequest)(e)}).finally(function(){e({isLoading:false})})}},615:function(e,t,a){e.exports={"card-lite":"card-lite__Qrs8y",charts:"charts__14Qr5"}},847:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(603);var n=y(r);var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,a,r){if(a)e(t.prototype,a);if(r)e(t,r);return t}}();a(601);var l=a(1);var i=y(l);var u=a(2);var s=y(u);var c=a(93);var f=a(578);var d=a(615);var p=y(d);var v=a(577);var m=a(614);var h=a(613);var b=y(h);function y(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var w=function(e){E(t,e);function t(e,a){_(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));r.state={isLoading:false,data:[],total:0};r.changeDate=function(e){(0,m.getDashboard)(r.setData,"posts-by-date",{start_time:e[0],end_time:e[1]})};r.setData=r.setState.bind(r);return r}o(t,[{key:"componentDidMount",value:function e(){(0,m.getDashboard)(this.setData,"posts-by-date")}},{key:"render",value:function e(){var t=this.props.t;var a=this.state,r=a.isLoading,o=a.data,l=a.total;return i.default.createElement(n.default,{loading:r,title:i.default.createElement(b.default,{title:t("manage.dashboard.card_post.title"),value:l,icon:"book",isLoading:r,changeDate:this.changeDate}),className:p.default["card-lite"]},i.default.createElement(f.Chart,{scale:v.chartScale,height:200,data:o,forceFit:true,className:p.default["charts"]},i.default.createElement(f.Axis,{name:"date",label:{formatter:v.dateFormater}}),i.default.createElement(f.Axis,{name:"count",label:{formatter:function e(){return""}}}),(0,v.cardTooltip)(t("manage.dashboard.card_post.title")),i.default.createElement(f.Geom,{shape:"area",type:"interval",opacity:.8,position:"date*count",size:15,color:v.mainColor})))}}]);return t}(l.Component);w.propTypes={title:s.default.string,children:s.default.object,className:s.default.string};t.default=(0,c.translate)(function(e){return e.namespaces})(w)},862:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getDashboardApi=i;var r=a(202);var n=l(r);var o=a(204);function l(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var a=o.MANAGE_API_URL+"v1/dashboard/"+e;return n.default.get(a,{params:{start_time:t.start_time||"",end_time:t.end_time||""}})}},872:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(603);var n=y(r);var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,a,r){if(a)e(t.prototype,a);if(r)e(t,r);return t}}();a(601);var l=a(1);var i=y(l);var u=a(2);var s=y(u);var c=a(93);var f=a(578);var d=a(615);var p=y(d);var v=a(577);var m=a(614);var h=a(613);var b=y(h);function y(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var w=function(e){E(t,e);function t(e,a){_(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));r.state={isLoading:false,data:[],total:0};r.changeDate=function(e){(0,m.getDashboard)(r.setData,"users-by-date",{start_time:e[0],end_time:e[1]})};r.setData=r.setState.bind(r);return r}o(t,[{key:"componentDidMount",value:function e(){(0,m.getDashboard)(this.setData,"users-by-date")}},{key:"render",value:function e(){var t=this.props.t;var a=this.state,r=a.isLoading,o=a.data,l=a.total;return i.default.createElement(n.default,{loading:r,title:i.default.createElement(b.default,{title:t("manage.dashboard.card_user.title"),value:l,icon:"user",isLoading:r,changeDate:this.changeDate}),className:p.default["card-lite"]},i.default.createElement(f.Chart,{scale:v.chartScale,height:200,data:o,className:p.default["charts"],forceFit:true},i.default.createElement(f.Axis,{name:"date",label:{formatter:v.dateFormater}}),i.default.createElement(f.Axis,{name:"count",label:{formatter:function e(t,a){return a%2==0?t:""}}}),(0,v.cardTooltip)(t("manage.dashboard.card_user.title")),i.default.createElement(f.Geom,{type:"line",opacity:.8,shape:"smooth",position:"date*count",size:2,color:v.mainColor})))}}]);return t}(l.Component);w.propTypes={title:s.default.string,children:s.default.object,className:s.default.string};t.default=(0,c.translate)(function(e){return e.namespaces})(w)},875:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=a(617);var n=m(r);var o=a(616);var l=m(o);var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,a,r){if(a)e(t.prototype,a);if(r)e(t,r);return t}}();a(874);a(873);var u=a(1);var s=m(u);var c=a(93);var f=a(872);var d=m(f);var p=a(847);var v=m(p);function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function b(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var _=function(e){y(t,e);function t(e,a){h(this,t);var r=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));r.setData=r.setState.bind(r);return r}i(t,[{key:"componentDidMount",value:function e(){}},{key:"render",value:function e(){return s.default.createElement("div",null,s.default.createElement(n.default,null,s.default.createElement(l.default,{xl:16,lg:14,md:14,sm:24},s.default.createElement(d.default,null)),s.default.createElement(l.default,{xl:8,lg:10,md:10,sm:24},s.default.createElement(v.default,null))))}}]);return t}(s.default.Component);_.propTypes={};t.default=(0,c.translate)(function(e){return e.namespaces})(_)}}]);