{"version":3,"sources":["webpack:///./src/entity/ScrollView.js","webpack:///./src/components/HOC/scrollTopView.js","webpack:///./src/modules/Mark/styles.less?e1fb","webpack:///./src/modules/Mark/Store.js","webpack:///./src/modules/Mark/ListMark.js","webpack:///./src/modules/Mark/Header.js","webpack:///./src/modules/Mark/index.js"],"names":["ScrollView","id","handle","_this","this","distance","arguments","length","undefined","_classCallCheck","addEventScroll","document","addEventListener","trackScrolling","wrappedElement","getElementById","isBottom","removeEventListener","el","getBoundingClientRect","bottom","window","innerHeight","_react","__webpack_require__","_reactRouter","scrollTopView","WrappedComponent","WebTitle","_Component","_inherits","_ref","_temp","_ret","_len","args","Array","_key","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","apply","concat","scrollTop","scrollTo","_createClass","key","value","render","_react2","default","createElement","props","Component","withRouter","module","exports","module-mark-layout-posts","module-mark-header","module-mark-header-icon","module-mark-header-text","module-mark-empty","module-mark-empty-text","module-mark-active-mark","_mobx","_httpRequest","_utility","_message","_markApis","_Store","Store","isLoading","error","lastMark","getLastArr","marks","lastMarkID","getMarkPostsBySubdomain","res","data","httpSuccess","status","_toConsumableArray","createStorePosts","meta","remain_total","total","pagination","messageHttpRequest","_context","t0","isEmpty","messageError","map","mark","_extends","postStore","createStorePost","post","StorePost","handleDelete","handleDeletePost","isEmptyArr","observable","action","computed","postID","_this2","filter","_propTypes","_Post","_Loading","_styles","_bind","_mobxReact","_ScrollView","_reactI18next","cx","classNamesBind","bind","styles","listId","ListMark","observer","getPosts","store","isLoadMore","getBookmarks","renderEmpty","_this$props","prefixCls","t","className","scrollView","_props","index","_Post2","_Loading2","React","defaultProps","propTypes","PropTypes","object","isRequired","translate","namespaces","Header","_icon2","type","_withTitle","_Header","_ListMark","_scrollTopView","Mark","_Header2","_ListMark2","_withTitle2","_scrollTopView2"],"mappings":"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","file":"13.2913f6caa8f441c04431.chunk.js","sourcesContent":["class ScrollView {\n    id = null;\n    distance = 0;\n    handle = null;\n\n    constructor(id, handle, distance = 500) {\n        this.id = id;\n        this.handle = handle;\n        this.distance = distance;\n    }\n\n\n    addEventScroll = () => {\n        document.addEventListener('scroll', this.trackScrolling);\n    };\n\n    trackScrolling = () => {\n        const wrappedElement = document.getElementById(this.id);\n        if (this.isBottom(wrappedElement)) {\n            if (this.handle) {\n                this.handle();\n            }\n            document.removeEventListener('scroll', this.trackScrolling);\n        }\n    };\n\n    isBottom = (el) => {\n        return el.getBoundingClientRect().bottom - this.distance <= window.innerHeight;\n    };\n}\n\nexport default ScrollView;","import React, {Component} from \"react\";\nimport {withRouter} from \"react-router\";\n\nconst scrollTopView = () => {\n    return WrappedComponent => {\n        class WebTitle extends Component {\n\n            scrollTop = () => {\n                window.scrollTo(0, 0);\n            };\n\n            render() {\n                this.scrollTop();\n                return (\n                    <WrappedComponent {...this.props}/>\n                );\n            }\n        }\n\n        return withRouter(WebTitle);\n    };\n};\n\nexport default scrollTopView;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"module-mark-layout-posts\":\"__17_fFJ\",\"module-mark-header\":\"__1mEoDv\",\"module-mark-header-icon\":\"__2JbHF7\",\"module-mark-header-text\":\"__2btz-z\",\"module-mark-empty\":\"__35LM6X\",\"module-mark-empty-text\":\"__1IklHv\",\"module-mark-active-mark\":\"__1D9GFW\"};","import {observable, action, computed} from \"mobx\";\nimport {httpSuccess, messageHttpRequest} from \"../../helpers/httpRequest\";\nimport {getLastArr, isEmpty, isEmptyArr} from \"../../helpers/utility\";\nimport {messageError} from \"../../helpers/message\";\nimport {getMarkPostsBySubdomain} from \"../../apis/markApis\";\nimport StorePost from \"../../components/Post/Store\";\n\nclass Store {\n    @observable marks = [];\n    @observable isLoading = false;\n    @observable error = null;\n    @observable pagination = {};\n\n    @action\n    async getBookmarks() {\n\n        if (this.isLoading) return;\n\n        this.isLoading = true;\n        this.error = null;\n        const lastMark = getLastArr(this.marks);\n        const lastMarkID = lastMark ? lastMark.id : '';\n\n        try {\n            const res = await getMarkPostsBySubdomain(lastMarkID);\n            const data = res.data;\n\n            if (httpSuccess(res.status)) {\n                const marks = data.data;\n                this.marks = [...this.marks, ...this.createStorePosts(marks)];\n                data.meta.remain_total = data.meta.total - marks.length;\n                this.pagination = data.meta;\n            } else {\n                this.error = messageHttpRequest();\n            }\n        } catch (error) {\n            this.error = messageHttpRequest(error);\n        } finally {\n            this.isLoading = false;\n            if (!isEmpty(this.error)) {\n                messageError(this.error);\n            }\n        }\n    }\n\n    @computed get isEmpty() {\n        return !this.isLoading && !this.error && isEmptyArr(this.marks);\n    }\n\n    @action handleDeletePost = (postID) => {\n        this.marks = this.marks.filter(mark => mark.postStore.post.id !== postID);\n    };\n\n    createStorePosts(marks) {\n        return marks.map((mark) => {\n            return {...mark, postStore: this.createStorePost(mark.post)};\n        });\n    }\n\n    createStorePost(post) {\n        return new StorePost(post, {handleDelete: this.handleDeletePost});\n    }\n\n    @computed get isLoadMore() {\n        return this.pagination.remain_total > 0;\n    }\n}\n\nexport default Store;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Post from \"../../components/Post/Post\";\nimport Loading from \"../../components/Post/Loading\";\nimport styles from './styles.less';\nimport classNamesBind from \"classnames/bind\";\nimport {observer} from \"mobx-react\";\nimport ScrollView from \"../../entity/ScrollView\";\nimport {translate} from \"react-i18next\";\n\nlet cx = classNamesBind.bind(styles);\n\nconst listId = \"list-mark\";\n\n@observer\nclass ListMark extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.scrollView = new ScrollView(listId, this.getPosts);\n    }\n\n    componentDidUpdate() {\n        const {store} = this.props;\n        const {isLoading} = store;\n        if (!isLoading) {\n            this.scrollView.addEventScroll();\n        }\n    }\n\n    getPosts = () => {\n        const {store} = this.props;\n        if (store.isLoadMore) {\n            store.getBookmarks();\n        }\n    };\n\n    renderEmpty = () => {\n        const {store, prefixCls, t} = this.props;\n        const {isEmpty} = store;\n        if (isEmpty) {\n            return (\n                <div className={cx(`${prefixCls}-empty`)}>\n                    <div className={cx(`${prefixCls}-empty-text`)}>\n                        {t('social.mark.noti.empty')}\n                    </div>\n                </div>\n            );\n        } else {\n            return (\n                <div/>\n            );\n        }\n    };\n\n    render() {\n        const {store, prefixCls} = this.props;\n        const {marks, isLoading} = store;\n        return (\n            <div\n                id={listId}\n                className={cx(`${prefixCls}-layout-posts`)}\n            >\n                {\n                    marks && marks.length > 0 ?\n                        (\n                            marks.map((mark, index) => {\n                                    return (\n                                        <div key={index}>\n                                            <Post store={mark.postStore} key={index}/>\n                                        </div>\n                                    );\n                                }\n                            )\n                        )\n                        :\n                        (\n                            isLoading &&\n                            <div>\n                                <Loading/>\n                                <Loading/>\n                            </div>\n                        )\n\n                }\n                {\n                    isLoading && <Loading/>\n                }\n                {\n                    this.renderEmpty()\n                }\n            </div>\n\n        );\n    }\n}\n\n\nListMark.defaultProps = {\n    prefixCls: 'module-mark'\n};\n\nListMark.propTypes = {\n    store: PropTypes.object.isRequired,\n};\n\nexport default translate(props => props.namespaces)(ListMark);","import React from \"react\";\n//import PropTypes from 'prop-types';\nimport {translate} from \"react-i18next\";\nimport classNamesBind from \"classnames/bind\";\nimport styles from './styles.less';\nimport {observer} from \"mobx-react\";\nimport {Icon} from \"antd\";\n\nlet cx = classNamesBind.bind(styles);\n\n@observer\nclass Header extends React.Component {\n    componentDidMount() {\n    }\n\n    render() {\n        const { t, prefixCls } = this.props;\n        return (\n            <div className={cx(`${prefixCls}-header`)}>\n                <div className={cx(`${prefixCls}-header-icon`)}>\n                    <Icon type=\"star\" className={cx(`${prefixCls}-active-mark`)}/>\n                </div>\n                <div className={cx(`${prefixCls}-header-text`)}>\n                    {t('social.mark.header.marked')}\n                </div>\n            </div>\n        );\n    }\n}\n\nHeader.defaultProps = {\n    prefixCls: 'module-mark'\n};\n\nHeader.propTypes = {};\n\nexport default translate(props => props.namespaces)(Header);\n","import React from \"react\";\n//import PropTypes from 'prop-types';\nimport {translate} from \"react-i18next\";\nimport withTitle from \"../../components/HOC/withTitle\";\nimport classNamesBind from \"classnames/bind\";\nimport styles from './styles.less';\nimport Header from \"./Header\";\nimport ListMark from \"./ListMark\";\nimport {observer} from \"mobx-react\";\nimport Store from \"./Store\";\nimport scrollTopView from \"../../components/HOC/scrollTopView\";\n\nlet cx = classNamesBind.bind(styles);\n\n@observer\nclass Mark extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.store = new Store();\n    }\n\n    componentDidMount() {\n        this.store.getBookmarks();\n    }\n\n    render() {\n        const {prefixCls} = this.props;\n        return (\n            <div className={cx(`${prefixCls}-layout`)}>\n                <Header/>\n                <ListMark store={this.store}/>\n            </div>\n        );\n    }\n}\n\nMark.defaultProps = {\n    prefixCls: 'module-mark'\n};\n\nMark.propTypes = {};\n\nexport default translate(props => props.namespaces)(withTitle()(scrollTopView()(Mark)));\n"],"sourceRoot":""}