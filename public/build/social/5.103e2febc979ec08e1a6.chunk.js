(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{530:function(e,t,r){e.exports={"post-layout-post":"__DaYUGt","post-header":"__3JRBrt","post-creator":"__10gkk7","post-creator-content":"__3DM1Yl","post-name":"__3DQhv3","post-text-time":"__3mKW7q","post-action":"__3SLdzV","post-action-icon":"__2-brKx","post-action-dropdown":"__3CH3Bv","post-content":"__2wjpF8","post-content-body":"__g15uC_","post-content-view-more":"__3-ED-e","post-layout-action":"__PUBz9g","post-active-mark":"__2E7Yal","post-action-left":"__2BXBDw","post-action-comment":"__LRw-RM","post-text-comment":"__1t3AeF","post-disabled":"__1tS9-W","post-layout-comment":"__-jFSXy","post-layout-image":"__3uck3R","post-image":"__3wxkfV","post-divider":"__3aJeT6","post-vertical":"__3AVbA8","post-footer":"__3GhPdU"}},541:function(e,t,r){e.exports={"post-comment-container-comment":"__2r2pbG","post-comment-text-load-more":"__2GNKoe","post-comment-layout-content":"__1h3BYB","post-comment-content":"__X7vTgg","post-comment-comment":"__3DL9UJ","post-comment-name":"__1E3x2C","post-comment-content-comment":"__1Ddrbh","post-comment-content-view-more":"__1q_akY","post-comment-layout-action":"__1epVOo","post-comment-action-left":"__1GYzjK","post-comment-action-right":"__YXMNun","post-comment-action-reply":"__1oqbf5","post-comment-text-time":"__2mULM3","post-comment-divider":"__2qebNE","post-comment-vertical":"__2QUeuC"}},542:function(e,t,r){e.exports={"editor-post-layout-editor":"__1-Uz1E","editor-post-disable":"__3hzu4k","editor-post-container":"__22fg5d","editor-post-editor":"__9WoFYm","editor-post-zoom-text":"__2Kf3Qv","editor-post-container-action":"__3OeoMV","editor-post-layout-action":"__3q_nap","editor-post-action-photo":"__25izQ1","editor-post-divider":"__28wqZ9","editor-post-horizontal":"__1_3nUb","editor-post-layout-image":"__21AQV_","editor-post-scrollable":"__3gGiWf","editor-post-container-image":"__HnuaTl","editor-post-image":"__3-u88_","editor-post-image-add":"__39dL-9","editor-post-image-action":"__3LrHgi","editor-post-image-action-view":"__3E5NCX","editor-post-image-action-remove":"__2uDRJA","editor-post-background-image":"__m3cDdJ","editor-post-loading":"__16D68x"}},549:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.addCommentApi=s;t.getCommentsApi=l;t.upVoteApi=c;t.downVoteApi=f;var n=r(202);var o=u(n);var a=r(136);var i=r(528);function u(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=a.MERCHANT_API_URL+("v1/post/"+e+"/comment");return o.default.post(r,{value:t.value})}function l(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var n=void 0;if((0,i.isLoggedIn)()){n=a.MERCHANT_API_URL+("v1/post/"+e+"/load-comment")}else{n=a.PUBLIC_MERCHANT_API_URL+("v1/post/"+e+"/load-comment")}return o.default.get(n,{params:{comment_id:t,limit:r}})}function c(e){var t=a.MERCHANT_API_URL+("v1/comment/"+e+"/vote/up");return o.default.post(t)}function f(e){var t=a.MERCHANT_API_URL+("v1/comment/"+e+"/vote/down");return o.default.post(t)}},554:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var a,i,u,s,l,c,f,p,d,v,m,h,y,b,g,_,w,E,O,P,k;var C=r(524);var j=r(523);var M=r(546);var x=r(617);var I=z(x);var D=r(616);var T=z(D);var R=r(584);var A=r(531);var N=r(199);var V=r(200);var S=r(525);function z(e){return e&&e.__esModule?e:{default:e}}function U(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var u=i.value}catch(e){r(e);return}if(i.done){e(u)}else{return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)})}}return n("next")})}}function L(e,t,r,n){if(!r)return;Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function F(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function B(e,t,r,n,o){var a={};Object["ke"+"ys"](n).forEach(function(e){a[e]=n[e]});a.enumerable=!!a.enumerable;a.configurable=!!a.configurable;if("value"in a||a.initializer){a.writable=true}a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a);if(o&&a.initializer!==void 0){a.value=a.initializer?a.initializer.call(o):void 0;a.initializer=undefined}if(a.initializer===void 0){Object["define"+"Property"](e,t,a);a=null}return a}function H(e,t){throw new Error("Decorating class property failed. Please ensure that transform-class-properties is enabled.")}var q=(a=C.action.bound,s=function(){function e(t,r){F(this,e);L(this,"post",l,this);L(this,"isVoting",c,this);L(this,"isMarking",f,this);L(this,"isDeleting",p,this);L(this,"errorVote",d,this);L(this,"errorDelete",v,this);L(this,"storeEditorComment",m,this);L(this,"storeComment",h,this);L(this,"showModalEdit",y,this);L(this,"config",b,this);L(this,"addUpVotePost",g,this);L(this,"addDownVotePost",_,this);L(this,"removeVotePost",w,this);L(this,"addBookmarked",E,this);L(this,"deleteBookmarked",O,this);L(this,"changeDataPost",P,this);L(this,"changeStatusModal",k,this);this.post=n({},t);this.storeComment=new T.default(t);this.storeEditorComment=new I.default(t);if(r){this.config=n({},this.config,r)}}o(e,[{key:"addMarkPost",value:function(){var e=U(regeneratorRuntime.mark(function e(){var t=this;var r,o,a,i,u;return regeneratorRuntime.wrap(function e(s){while(1){switch(s.prev=s.next){case 0:if(!this.isMarking){s.next=2;break}return s.abrupt("return");case 2:this.isMarking=true;r=this.post;o=r.id;a=n({},r);this.addBookmarked();s.prev=7;s.next=10;return(0,R.addMarkPostApi)(o);case 10:i=s.sent;u=i.data;if((0,j.httpSuccess)(i.status)){this.changeDataPost(u.data.post)}else{this.changeDataPost(a)}s.next=18;break;case 15:s.prev=15;s.t0=s["catch"](7);this.changeDataPost(a);case 18:s.prev=18;(0,C.runInAction)(function(){t.isMarking=false});return s.finish(18);case 21:case"end":return s.stop()}}},e,this,[[7,15,18,21]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"deleteMarkPost",value:function(){var e=U(regeneratorRuntime.mark(function e(){var t=this;var r,o,a,i;return regeneratorRuntime.wrap(function e(u){while(1){switch(u.prev=u.next){case 0:if(!this.isMarking){u.next=2;break}return u.abrupt("return");case 2:this.isMarking=true;r=this.post;o=r.id;a=n({},r);this.deleteBookmarked();u.prev=7;u.next=10;return(0,R.deleteMarkPostApi)(o);case 10:i=u.sent;if((0,j.httpSuccess)(i.status)){}else{this.changeDataPost(a)}u.next=17;break;case 14:u.prev=14;u.t0=u["catch"](7);this.changeDataPost(a);case 17:u.prev=17;(0,C.runInAction)(function(){t.isMarking=false});return u.finish(17);case 20:case"end":return u.stop()}}},e,this,[[7,14,17,20]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"upVote",value:function(){var e=U(regeneratorRuntime.mark(function e(){var t=this;var r,o,a,i,u;return regeneratorRuntime.wrap(function e(s){while(1){switch(s.prev=s.next){case 0:if(!this.isVoting){s.next=2;break}return s.abrupt("return");case 2:this.isVoting=true;r=this.post;o=r.id;a=n({},r);if(r.vote==1){this.removeVotePost()}else{this.addUpVotePost()}s.prev=7;s.next=10;return(0,M.upVoteApi)(o);case 10:i=s.sent;u=i.data;if((0,j.httpSuccess)(i.status)){this.changeDataPost(u.data)}else{this.changeDataPost(a)}s.next=18;break;case 15:s.prev=15;s.t0=s["catch"](7);this.changeDataPost(a);case 18:s.prev=18;(0,C.runInAction)(function(){t.isVoting=false});return s.finish(18);case 21:case"end":return s.stop()}}},e,this,[[7,15,18,21]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"downVote",value:function(){var e=U(regeneratorRuntime.mark(function e(){var t=this;var r,o,a,i,u;return regeneratorRuntime.wrap(function e(s){while(1){switch(s.prev=s.next){case 0:if(!this.isVoting){s.next=2;break}return s.abrupt("return");case 2:this.isVoting=true;r=this.post;o=r.id;a=n({},r);if(r.vote==-1){this.removeVotePost()}else{this.addDownVotePost()}s.prev=7;s.next=10;return(0,M.downVoteApi)(o);case 10:i=s.sent;u=i.data;if((0,j.httpSuccess)(i.status)){this.changeDataPost(u.data)}else{this.changeDataPost(a)}s.next=18;break;case 15:s.prev=15;s.t0=s["catch"](7);this.changeDataPost(a);case 18:s.prev=18;(0,C.runInAction)(function(){t.isVoting=false});return s.finish(18);case 21:case"end":return s.stop()}}},e,this,[[7,15,18,21]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"deletePost",value:function(){var e=U(regeneratorRuntime.mark(function e(){var t=this;var r,n,o;return regeneratorRuntime.wrap(function e(a){while(1){switch(a.prev=a.next){case 0:if(!this.isDeleting){a.next=2;break}return a.abrupt("return");case 2:this.isDeleting=true;this.errorDelete=null;r=this.post;n=r.id;a.prev=6;a.next=9;return(0,M.deletePostApi)(n);case 9:o=a.sent;if((0,j.httpSuccess)(o.status)){(0,S.messageSuccess)((0,V.translateI18n)("social.home.post_item.delete_post_success"));if(this.config.handleDelete){this.config.handleDelete(n)}}else{(0,C.runInAction)(function(){t.errorDelete=(0,j.messageHttpRequest)()})}a.next=16;break;case 13:a.prev=13;a.t0=a["catch"](6);(0,C.runInAction)(function(){t.errorDelete=(0,j.messageHttpRequest)(a.t0)});case 16:a.prev=16;(0,C.runInAction)(function(){t.isDeleting=false});if(this.errorDelete){(0,S.messageError)(this.errorDelete)}return a.finish(16);case 20:case"end":return a.stop()}}},e,this,[[6,13,16,20]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"incComment",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;this.post.num_comments+=t}},{key:"disableViewMore",value:function e(){this.config.viewMore=false}},{key:"content",get:function e(){if(this.viewMore){return(0,A.splitStrToViewMore)(this.post.body)}else{return this.post.body}}},{key:"viewMore",get:function e(){return!(0,N.isEmpty)(this.post.body)&&((0,A.isViewMore)(this.post.body)||(0,A.overLineNumber)(this.post.body))&&this.config.viewMore}}]);return e}(),l=B(s.prototype,"post",[C.observable],{enumerable:true,initializer:function e(){return{}}}),c=B(s.prototype,"isVoting",[C.observable],{enumerable:true,initializer:function e(){return false}}),f=B(s.prototype,"isMarking",[C.observable],{enumerable:true,initializer:function e(){return false}}),p=B(s.prototype,"isDeleting",[C.observable],{enumerable:true,initializer:function e(){return false}}),d=B(s.prototype,"errorVote",[C.observable],{enumerable:true,initializer:function e(){return null}}),v=B(s.prototype,"errorDelete",[C.observable],{enumerable:true,initializer:function e(){return null}}),m=B(s.prototype,"storeEditorComment",[C.observable],{enumerable:true,initializer:function e(){return{}}}),h=B(s.prototype,"storeComment",[C.observable],{enumerable:true,initializer:function e(){return{}}}),y=B(s.prototype,"showModalEdit",[C.observable],{enumerable:true,initializer:function e(){return false}}),b=B(s.prototype,"config",[C.observable],{enumerable:true,initializer:function e(){return{hideListComment:false,hideEditorComment:false,viewMore:true,handleDelete:null}}}),B(s.prototype,"addMarkPost",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"addMarkPost"),s.prototype),B(s.prototype,"deleteMarkPost",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"deleteMarkPost"),s.prototype),B(s.prototype,"upVote",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"upVote"),s.prototype),B(s.prototype,"downVote",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"downVote"),s.prototype),B(s.prototype,"deletePost",[a],Object.getOwnPropertyDescriptor(s.prototype,"deletePost"),s.prototype),g=B(s.prototype,"addUpVotePost",[C.action],{enumerable:true,initializer:function e(){var t=this;return function(){var e=t.post;if(e.vote==0){e.upvote++}else if(e.vote==-1){e.upvote++;e.downvote--}e.vote=1}}}),_=B(s.prototype,"addDownVotePost",[C.action],{enumerable:true,initializer:function e(){var t=this;return function(){var e=t.post;if(e.vote==0){e.downvote++}else if(e.vote==1){e.upvote--;e.downvote++}e.vote=-1}}}),w=B(s.prototype,"removeVotePost",[C.action],{enumerable:true,initializer:function e(){var t=this;return function(){var e=t.post;if(e.vote==1){e.upvote--}else if(e.vote==-1){e.downvote--}e.vote=0}}}),E=B(s.prototype,"addBookmarked",[C.action],{enumerable:true,initializer:function e(){var t=this;return function(){t.post.isBookmarked=1}}}),O=B(s.prototype,"deleteBookmarked",[C.action],{enumerable:true,initializer:function e(){var t=this;return function(){t.post.isBookmarked=0}}}),P=B(s.prototype,"changeDataPost",[C.action],{enumerable:true,initializer:function e(){var t=this;return function(e){t.post=n({},t.post,e)}}}),B(s.prototype,"incComment",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"incComment"),s.prototype),B(s.prototype,"content",[C.computed],Object.getOwnPropertyDescriptor(s.prototype,"content"),s.prototype),B(s.prototype,"disableViewMore",[C.action],Object.getOwnPropertyDescriptor(s.prototype,"disableViewMore"),s.prototype),B(s.prototype,"viewMore",[C.computed],Object.getOwnPropertyDescriptor(s.prototype,"viewMore"),s.prototype),k=B(s.prototype,"changeStatusModal",[C.action],{enumerable:true,initializer:function e(){var t=this;return function(e){t.showModalEdit=e}}}),s);t.default=q},555:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1);var o=p(n);var a=r(198);var i=p(a);var u=r(540);var s=p(u);var l=r(537);var c=r(530);var f=p(c);function p(e){return e&&e.__esModule?e:{default:e}}var d=i.default.bind(f.default);var v=function e(t){var r=t.prefixCls;return o.default.createElement("div",null,o.default.createElement("div",{className:d(r+"-layout-post")},o.default.createElement("div",{className:d(r+"-header")},o.default.createElement("div",{className:d(r+"-creator"),style:{width:"100%"}},o.default.createElement(l.RoundShape,{color:"#E0E0E0",style:{width:30,height:30}}),o.default.createElement("div",{className:d(r+"-creator-content")},o.default.createElement("div",{className:d(r+"-name")},o.default.createElement(l.TextBlock,{rows:2,color:"#E0E0E0"}))))),o.default.createElement("div",{className:d(r+"-content"),style:{paddingBottom:"100px",marginTop:"20px"}},o.default.createElement("div",{className:d(r+"-content-body")},o.default.createElement(l.TextBlock,{rows:5,color:"#E0E0E0"})))))};v.defaultProps={prefixCls:"post"};t.default=(0,s.default)()(v)},559:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(206);var o=T(n);var a=r(543);var i=T(a);var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var l;r(205);r(545);var c=r(1);var f=T(c);var p=r(2);var d=T(p);var v=r(530);var m=T(v);var h=r(198);var y=T(h);var b=r(647);var g=T(b);var _=r(643);var w=T(_);var E=r(636);var O=T(E);var P=r(521);var k=r(593);var C=T(k);var j=r(635);var M=T(j);var x=r(199);var I=r(620);var D=r(92);function T(e){return e&&e.__esModule?e:{default:e}}function R(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function A(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function N(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var V=y.default.bind(m.default);var S=(0,P.observer)(l=function(e){N(t,e);function t(e){R(this,t);var r=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.incNumberComment=function(){var e=r.props.store;e.incComment()};r.handleMark=function(){var e=r.props.store;var t=e.post;if(t.isBookmarked){e.deleteMarkPost()}else{e.addMarkPost()}};r.handleDelete=function(){var e=r.props,t=e.store,n=e.t;var o=n("social.home.post_item.are_you_sure_delete_this_post?");(0,I.showDeleteConfirm)(o,"",t.deletePost)};r.handleEdit=function(){var e=r.props.store;e.changeStatusModal(true)};r.closeModalEdit=function(){var e=r.props.store;e.changeStatusModal(false)};r.handleCloseModalEdit=function(){var e=r.props.t;var t=e("social.home.post_item.are_you_sure_close_edit_this_post");var n=e("social.home.post_item.close_modal_lost_content");(0,I.showWarningConfirm)(t,n,r.closeModalEdit)};r.handleEditPostSuccess=function(e){var t=r.props.store;t.changeDataPost(e);r.closeModalEdit()};return r}s(t,[{key:"render",value:function e(){var t=this.props,r=t.store,n=t.prefixCls,a=t.t;var s=r.post,l=r.storeComment,c=r.storeEditorComment,p=r.config,d=r.isDeleting,v=r.showModalEdit;var m=(0,x.linkRoute)("/post/:postID",{postID:s.id});var h=(0,x.linkRoute)("/profile/:userID",{userID:(0,x.getValueObjectFromStringKey)(s,"creator.id")});var y=d;return f.default.createElement("div",null,f.default.createElement(o.default,{spinning:y,size:"large"},f.default.createElement("div",{className:V(n+"-layout-post")},f.default.createElement(g.default,{post:s,linkDetail:m,linkProfile:h,handleMark:this.handleMark,handleDelete:this.handleDelete,handleEdit:this.handleEdit}),f.default.createElement(w.default,{post:s,store:r}),f.default.createElement(O.default,{post:s,store:r,handleMark:this.handleMark}),f.default.createElement("div",{className:V(n+"-layout-comment")},f.default.createElement(M.default,{hideComment:p.hideListComment,hideEditorComment:p.hideEditorComment,post:s,incNumberComment:this.incNumberComment,storeComment:l,storeEditorComment:c}))),v&&f.default.createElement(i.default,{title:a("social.home.post_item.modal_edit_post_title"),visible:true,bodyStyle:{padding:0},footer:null,maskClosable:false,onCancel:this.handleCloseModalEdit},f.default.createElement(C.default,{post:u({},s),editPost:this.handleEditPostSuccess}))))}}]);return t}(f.default.Component))||l;S.defaultProps={prefixCls:"post"};S.propTypes={store:d.default.object};t.default=(0,D.translate)(function(e){return e.namespaces})(S)},565:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=t.CREATE_COMMENT="comment.create";var o=t.CREATE_NOTIFICATION="notification.create";var a=t.CREATE_POST="post.create"},566:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(626);var o=i(n);var a=r(136);function i(e){return e&&e.__esModule?e:{default:e}}var u=a.SOCKET_HOST+":"+a.SOCKET_PORT;var s=(0,o.default)(u);t.default=s},569:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=undefined;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=r(1);var a=s(o);var i=r(2);var u=s(i);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var p=function(e){f(t,e);function t(){var e;var r,n,o;l(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++){i[u]=arguments[u]}return o=(r=(n=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n),n._onClick=function(){n._ref.click();n._ref.value=""},r),c(n,o)}n(t,[{key:"render",value:function e(){var t=this;var r=this.props,n=r.type,o=r.multiple,i=r.onChange;return a.default.createElement("span",{ref:"file",onClick:this._onClick},a.default.createElement("input",{type:"file",accept:n,ref:function e(r){t._ref=r},onChange:i,multiple:o,style:{display:"none"}}),this.props.children)}}]);return t}(o.Component);t.default=p;p.propTypes={type:u.default.string.isRequired,multiple:u.default.bool.isRequired,onChange:u.default.func.isRequired}},584:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.addMarkPostApi=u;t.deleteMarkPostApi=s;t.getMarkPostsBySubdomain=l;t.getAllMarkPosts=c;var n=r(202);var o=i(n);var a=r(136);function i(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=a.MERCHANT_API_URL+("v1/user/bookmark/post/"+e);return o.default.post(t)}function s(e){var t=a.MERCHANT_API_URL+("v1/user/bookmark/post/"+e);return o.default.delete(t)}function l(e){var t=a.MERCHANT_API_URL+("v1/user/bookmark/by-sub-domain/after/"+e);return o.default.get(t)}function c(e){var t=a.MERCHANT_API_URL+("v1/user/bookmark/after/"+e);return o.default.get(t)}},593:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(574);var o=N(n);var a=r(533);var i=N(a);var u=r(553);var s=N(u);var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var c;r(592);r(535);r(552);var f=r(1);var p=N(f);var d=r(2);var v=N(d);var m=r(542);var h=N(m);var y=r(198);var b=N(y);var g=r(529);var _=r(532);var w=N(_);var E=r(527);var O=r(92);var P=r(654);var k=N(P);var C=r(521);var j=r(651);var M=N(j);var x=r(650);var I=N(x);var D=r(199);var T=r(528);var R=r(525);var A=r(531);function N(e){return e&&e.__esModule?e:{default:e}}function V(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function S(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function z(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function U(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var L=b.default.bind(h.default);var F=(0,C.observer)(c=function(e){U(t,e);function t(e){S(this,t);var r=z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r._onFocus=function(){r.store.setFocusEditor(true)};r._onBlur=function(){r.store.setFocusEditor(false)};r._checkEmpty=function(){if(r._ref.innerHTML=="<br>"){r._ref.innerHTML=""}};r.renderMessageError=function(e){return p.default.createElement(s.default,{style:{marginTop:20,marginBottom:20},message:e,type:"error",showIcon:true})};r.clearData=function(){r._ref.innerHTML="";r.store.reset()};r.uploadPostSuccess=function(e){var t=r.props.post;r.clearData();r._onBlur();var n=!(0,D.isEmpty)((0,D.getValueObjectFromStringKey)(t,"id"));if(n){r.props.editPost(e)}else{r.props.addPost(e)}};r.submitAddPost=function(){r.store.addPost(r.uploadPostSuccess)};r.submitEditPost=function(){r.store.editPost(r.uploadPostSuccess)};r.onSelectImageToUpload=function(e){var t=r.props.t;var n=r.store.images;var o=Array.from(e);if(o.length+n.length>10){(0,R.messageWarning)(t("social.editor.noti.limit_file_upload"));o=o.slice(0,10-n.length)}if(o.length<=0)return;o=o.map(function(e){return{file:e}});r.store.addImages(o)};r.renderSubmit=function(){var e=r.props,t=e.t,n=e.post,o=e.account;var a=!(0,D.isEmpty)((0,D.getValueObjectFromStringKey)(n,"id"));var u=o.joined,s=o.isJoining,l=o.onJoin;if((0,T.isLoggedIn)()){if(!u){return p.default.createElement(i.default,{type:"primary",loading:s,onClick:s?null:l,style:{width:"100%"}},t("social.editor.form.button_join_to_post"))}if(a){return p.default.createElement(i.default,{type:"primary",onClick:r.submitEditPost,style:{width:"100%"}},t("social.editor.form.button_edit_post"))}return p.default.createElement(i.default,{type:"primary",onClick:r.submitAddPost,style:{width:"100%"}},t("social.editor.form.button_post"))}else{return p.default.createElement(i.default,{type:"primary",onClick:function e(){(0,T.redirectSignIn)()},style:{width:"100%"}},t("social.editor.form.button_signin_to_post"))}};r.handlePaste=function(e){e.stopPropagation();e.preventDefault();var t=e.clipboardData||window.clipboardData;var n=t.getData("text/plain");n=(0,A.convertDataPastedEditor)(n);document.execCommand("insertHtml",false,n);r.setContent()};r.setContent=function(){setTimeout(function(){r.store.setContent(r._ref.innerHTML);r.store.setLineNumber(r._ref.childElementCount)},100)};r.onKeyPress=function(){r._checkEmpty();r.setContent()};r.getPlaceHolderEditor=function(){var e=r.props,t=e.account,n=e.t;var o=t.joined;var a=(0,T.isLoggedIn)()?n("social.editor.form.placeholder"):n("social.editor.form.placeholder_need_signin");a=o?a:n("social.editor.form.placeholder_need_join");return a};r.store=new k.default(e.post);if(e.post){r.defaultValue=(0,A.convertDataBeforeAddEditor)(e.post.body);r._onFocus()}else{r.defaultValue=""}return r}l(t,[{key:"render",value:function e(){var t=this;var r=this.props,n=r.account,a=r.prefixCls;var i=n.acceptAction;var u=this.store,s=u.isFocus,l=u.percentUpload,c=u.error,f=u.isUploading,d=u.images,v=u.isZoomText;var m=n&&n.avatar_url?n.avatar_url:E.LOGO;var h=this.getPlaceHolderEditor();return p.default.createElement("div",{className:L(a+"-layout-editor",V({},a+"-disable",f))},p.default.createElement("div",{className:L(a+"-container")},p.default.createElement(w.default,{url:m,size:40}),p.default.createElement("div",{className:L(a+"-editor",V({},a+"-zoom-text",s&&v)),contentEditable:!f,onFocus:this._onFocus,ref:function e(r){t._ref=r},onPaste:this.handlePaste,placeholder:h,onKeyUp:this.onKeyPress,dangerouslySetInnerHTML:{__html:this.defaultValue}})),!(0,D.isEmptyArr)(d)&&p.default.createElement(I.default,{images:d,store:this.store,onSelectImageToUpload:this.onSelectImageToUpload}),s&&i&&p.default.createElement("div",null,p.default.createElement("div",{className:L(a+"-divider",a+"-horizontal")}),p.default.createElement(M.default,{onSelectImageToUpload:this.onSelectImageToUpload})),c&&this.renderMessageError(c),s&&p.default.createElement("div",{className:L(a+"-container-action")},f?p.default.createElement(o.default,{percent:l*100,status:"active",showInfo:false}):this.renderSubmit()))}}]);return t}(p.default.Component))||c;F.defaultProps={prefixCls:"editor-post"};F.propTypes={addPost:v.default.func,editPost:v.default.func,post:v.default.object};t.default=(0,O.translate)(function(e){return e.namespaces})((0,g.withAccount)(F))},615:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var a,i,u,s,l,c,f,p,d,v;var m=r(524);var h=r(549);var y=r(523);var b=r(531);function g(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var u=i.value}catch(e){r(e);return}if(i.done){e(u)}else{return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)})}}return n("next")})}}function _(e,t,r,n){if(!r)return;Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function w(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function E(e,t,r,n,o){var a={};Object["ke"+"ys"](n).forEach(function(e){a[e]=n[e]});a.enumerable=!!a.enumerable;a.configurable=!!a.configurable;if("value"in a||a.initializer){a.writable=true}a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a);if(o&&a.initializer!==void 0){a.value=a.initializer?a.initializer.call(o):void 0;a.initializer=undefined}if(a.initializer===void 0){Object["define"+"Property"](e,t,a);a=null}return a}function O(e,t){throw new Error("Decorating class property failed. Please ensure that transform-class-properties is enabled.")}var P=(u=function(){function e(t){w(this,e);_(this,"comment",s,this);_(this,"isVoting",l,this);_(this,"isViewMore",c,this);_(this,"addUpVoteComment",f,this);_(this,"addDownVoteComment",p,this);_(this,"removeVoteComment",d,this);_(this,"changeDataComment",v,this);this.comment=t}o(e,[{key:"upVote",value:function(){var e=g(regeneratorRuntime.mark(function e(){var t,r,o,a,i;return regeneratorRuntime.wrap(function e(u){while(1){switch(u.prev=u.next){case 0:if(!this.isVoting){u.next=2;break}return u.abrupt("return");case 2:this.isVoting=true;t=this.comment;r=t.id;o=n({},t);if(t.vote==1){this.removeVoteComment()}else{this.addUpVoteComment()}u.prev=7;u.next=10;return(0,h.upVoteApi)(r);case 10:a=u.sent;i=a.data;if((0,y.httpSuccess)(a.status)){this.changeDataComment(i.data)}else{this.changeDataComment(o)}u.next=18;break;case 15:u.prev=15;u.t0=u["catch"](7);this.changeDataComment(o);case 18:u.prev=18;this.isVoting=false;return u.finish(18);case 21:case"end":return u.stop()}}},e,this,[[7,15,18,21]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"downVote",value:function(){var e=g(regeneratorRuntime.mark(function e(){var t,r,o,a,i;return regeneratorRuntime.wrap(function e(u){while(1){switch(u.prev=u.next){case 0:if(!this.isVoting){u.next=2;break}return u.abrupt("return");case 2:this.isVoting=true;t=this.comment;r=t.id;o=n({},t);if(t.vote==-1){this.removeVoteComment()}else{this.addDownVoteComment()}u.prev=7;u.next=10;return(0,h.downVoteApi)(r);case 10:a=u.sent;i=a.data;if((0,y.httpSuccess)(a.status)){this.changeDataComment(i.data)}else{this.changeDataComment(o)}u.next=18;break;case 15:u.prev=15;u.t0=u["catch"](7);this.changeDataComment(o);case 18:u.prev=18;this.isVoting=false;return u.finish(18);case 21:case"end":return u.stop()}}},e,this,[[7,15,18,21]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"disableViewMore",value:function e(){this.isViewMore=false}},{key:"content",get:function e(){if(this.viewMore){return(0,b.splitStrToViewMore)(this.comment.value)}else{return this.comment.value}}},{key:"viewMore",get:function e(){return((0,b.isViewMore)(this.comment.value)||(0,b.overLineNumber)(this.comment.value))&&this.isViewMore}}]);return e}(),s=E(u.prototype,"comment",[m.observable],{enumerable:true,initializer:function e(){return{}}}),l=E(u.prototype,"isVoting",[m.observable],{enumerable:true,initializer:function e(){return false}}),c=E(u.prototype,"isViewMore",[m.observable],{enumerable:true,initializer:function e(){return true}}),E(u.prototype,"upVote",[m.action],Object.getOwnPropertyDescriptor(u.prototype,"upVote"),u.prototype),E(u.prototype,"downVote",[m.action],Object.getOwnPropertyDescriptor(u.prototype,"downVote"),u.prototype),f=E(u.prototype,"addUpVoteComment",[m.action],{enumerable:true,initializer:function e(){var t=this;return function(){var e=t.comment;if(e.vote===0){e.upvote++}else if(e.vote===-1){e.upvote++;e.downvote--}e.vote=1}}}),p=E(u.prototype,"addDownVoteComment",[m.action],{enumerable:true,initializer:function e(){var t=this;return function(){var e=t.comment;if(e.vote==0){e.downvote++}else if(e.vote==1){e.upvote--;e.downvote++}e.vote=-1}}}),d=E(u.prototype,"removeVoteComment",[m.action],{enumerable:true,initializer:function e(){var t=this;return function(){var e=t.comment;if(e.vote==1){e.upvote--}else if(e.vote==-1){e.downvote--}e.vote=0}}}),v=E(u.prototype,"changeDataComment",[m.action],{enumerable:true,initializer:function e(){var t=this;return function(e,r){t.comment=n({},t.comment,r)}}}),E(u.prototype,"content",[m.computed],Object.getOwnPropertyDescriptor(u.prototype,"content"),u.prototype),E(u.prototype,"disableViewMore",[m.action],Object.getOwnPropertyDescriptor(u.prototype,"disableViewMore"),u.prototype),E(u.prototype,"viewMore",[m.computed],Object.getOwnPropertyDescriptor(u.prototype,"viewMore"),u.prototype),u);t.default=P},616:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o,a,i,u,s,l,c,f;var p=r(524);var d=r(549);var v=r(523);var m=r(199);var h=r(615);var y=_(h);var b=r(525);var g=r(544);function _(e){return e&&e.__esModule?e:{default:e}}function w(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++){r[t]=e[t]}return r}else{return Array.from(e)}}function E(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var u=i.value}catch(e){r(e);return}if(i.done){e(u)}else{return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)})}}return n("next")})}}function O(e,t,r,n){if(!r)return;Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function P(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function k(e,t,r,n,o){var a={};Object["ke"+"ys"](n).forEach(function(e){a[e]=n[e]});a.enumerable=!!a.enumerable;a.configurable=!!a.configurable;if("value"in a||a.initializer){a.writable=true}a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a);if(o&&a.initializer!==void 0){a.value=a.initializer?a.initializer.call(o):void 0;a.initializer=undefined}if(a.initializer===void 0){Object["define"+"Property"](e,t,a);a=null}return a}function C(e,t){throw new Error("Decorating class property failed. Please ensure that transform-class-properties is enabled.")}var j=(i=function(){function e(t){var r=this;P(this,e);this.post=null;O(this,"comments",u,this);O(this,"isLoading",s,this);O(this,"error",l,this);O(this,"pagination",c,this);O(this,"addComment",f,this);this.isExistedComment=function(e){return(0,m.isExistArray)(r.comments,e,"id",function(t){return t.comment.id==e.id})};this.post=t}n(e,[{key:"getComments",value:function(){var e=E(regeneratorRuntime.mark(function e(t){var r=this;var n,o,a,i,u,s;return regeneratorRuntime.wrap(function e(l){while(1){switch(l.prev=l.next){case 0:n=this.post.id;this.isLoading=true;this.error=null;l.prev=3;o=(0,m.getFirstArr)(this.comments);a=o?o.comment.id:"";l.next=8;return(0,d.getCommentsApi)(n,a,t);case 8:i=l.sent;u=i.data;if((0,v.httpSuccess)(i.status)){s=u.data;s=this.createStoreComments(s);(0,p.runInAction)(function(){r.comments=(0,g.concat2Array)(s.reverse(),r.comments);u.meta.remain_total=u.meta.total-s.length;r.pagination=u.meta})}else{(0,p.runInAction)(function(){r.error=(0,v.messageHttpRequest)()})}l.next=16;break;case 13:l.prev=13;l.t0=l["catch"](3);(0,p.runInAction)(function(){r.error=(0,v.messageHttpRequest)(l.t0)});case 16:l.prev=16;(0,p.runInAction)(function(){r.isLoading=false});if(!(0,m.isEmpty)(this.error)){(0,b.messageError)(this.error)}return l.finish(16);case 20:case"end":return l.stop()}}},e,this,[[3,13,16,20]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"createStoreComments",value:function e(t){var r=this;return t.map(function(e){return r.createStoreComment(e)})}},{key:"createStoreComment",value:function e(t){return new y.default(t)}},{key:"isLoadMore",get:function e(){return this.pagination.remain_total>0}}]);return e}(),u=k(i.prototype,"comments",[p.observable],{enumerable:true,initializer:function e(){return[]}}),s=k(i.prototype,"isLoading",[p.observable],{enumerable:true,initializer:function e(){return false}}),l=k(i.prototype,"error",[p.observable],{enumerable:true,initializer:function e(){return null}}),c=k(i.prototype,"pagination",[p.observable],{enumerable:true,initializer:function e(){return{}}}),k(i.prototype,"getComments",[p.action],Object.getOwnPropertyDescriptor(i.prototype,"getComments"),i.prototype),f=k(i.prototype,"addComment",[p.action],{enumerable:true,initializer:function e(){var t=this;return function(e){t.comments=[].concat(w(t.comments),[t.createStoreComment(e)])}}}),k(i.prototype,"isLoadMore",[p.computed],Object.getOwnPropertyDescriptor(i.prototype,"isLoadMore"),i.prototype),i);t.default=j},617:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o,a,i,u,s,l,c,f;var p=r(524);var d=r(523);var v=r(549);var m=r(525);var h=r(531);function y(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var u=i.value}catch(e){r(e);return}if(i.done){e(u)}else{return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)})}}return n("next")})}}function b(e,t,r,n){if(!r)return;Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _(e,t,r,n,o){var a={};Object["ke"+"ys"](n).forEach(function(e){a[e]=n[e]});a.enumerable=!!a.enumerable;a.configurable=!!a.configurable;if("value"in a||a.initializer){a.writable=true}a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a);if(o&&a.initializer!==void 0){a.value=a.initializer?a.initializer.call(o):void 0;a.initializer=undefined}if(a.initializer===void 0){Object["define"+"Property"](e,t,a);a=null}return a}function w(e,t){throw new Error("Decorating class property failed. Please ensure that transform-class-properties is enabled.")}var E=(i=function(){function e(t){g(this,e);this.post=null;b(this,"isUploading",u,this);b(this,"error",s,this);b(this,"isFocus",l,this);b(this,"content",c,this);b(this,"setFocusEditor",f,this);this.post=t}n(e,[{key:"addComment",value:function(){var e=y(regeneratorRuntime.mark(function e(t){var r=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var o,a,i;return regeneratorRuntime.wrap(function e(u){while(1){switch(u.prev=u.next){case 0:o=this.post.id;this.isUploading=true;this.error=null;u.prev=3;u.next=6;return(0,v.addCommentApi)(o,t);case 6:a=u.sent;i=a.data;if((0,d.httpSuccess)(a.status)){if(n){n(i.data)}}else{(0,p.runInAction)(function(){r.error=(0,d.messageHttpRequest)()})}u.next=14;break;case 11:u.prev=11;u.t0=u["catch"](3);(0,p.runInAction)(function(){r.error=(0,d.messageHttpRequest)(u.t0)});case 14:u.prev=14;(0,p.runInAction)(function(){r.isUploading=false});if(this.error){(0,m.messageError)(this.error)}return u.finish(14);case 18:case"end":return u.stop()}}},e,this,[[3,11,14,18]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"reset",value:function e(){this.isUploading=false;this.error=null;this.isFocus=false;this.content=""}},{key:"setContent",value:function e(t){this.content=(0,h.convertDataEditor)(t)}},{key:"setLineNumber",value:function e(t){this.lineNumber=t}}]);return e}(),u=_(i.prototype,"isUploading",[p.observable],{enumerable:true,initializer:function e(){return false}}),s=_(i.prototype,"error",[p.observable],{enumerable:true,initializer:function e(){return null}}),l=_(i.prototype,"isFocus",[p.observable],{enumerable:true,initializer:function e(){return false}}),c=_(i.prototype,"content",[p.observable],{enumerable:true,initializer:function e(){return""}}),_(i.prototype,"addComment",[p.action],Object.getOwnPropertyDescriptor(i.prototype,"addComment"),i.prototype),f=_(i.prototype,"setFocusEditor",[p.action],{enumerable:true,initializer:function e(){var t=this;return function(e){t.isFocus=e}}}),_(i.prototype,"reset",[p.action],Object.getOwnPropertyDescriptor(i.prototype,"reset"),i.prototype),_(i.prototype,"setContent",[p.action],Object.getOwnPropertyDescriptor(i.prototype,"setContent"),i.prototype),_(i.prototype,"setLineNumber",[p.action],Object.getOwnPropertyDescriptor(i.prototype,"setLineNumber"),i.prototype),i);t.default=E},620:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(543);var o=u(n);t.showDeleteConfirm=s;t.showWarningConfirm=l;r(545);var a=r(199);var i=r(200);function u(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var r=arguments[2];var n=arguments[3];var u=arguments[4];var s=arguments[5];o.default.confirm({title:(0,a.isEmpty)(e)?(0,i.translateI18n)("social.global.are_you_sure_delete"):e,content:t,okText:(0,a.isEmpty)(u)?(0,i.translateI18n)("social.global.yes"):u,okType:"danger",cancelText:(0,a.isEmpty)(s)?(0,i.translateI18n)("social.global.no"):s,onOk:function e(){if(r){r()}},onCancel:function e(){if(n){n()}}})}function l(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var r=arguments[2];var n=arguments[3];var u=arguments[4];var s=arguments[5];o.default.confirm({title:(0,a.isEmpty)(e)?(0,i.translateI18n)("social.global.are_you_sure"):e,content:t,okText:(0,a.isEmpty)(u)?(0,i.translateI18n)("social.global.yes"):u,okType:"danger",cancelText:(0,a.isEmpty)(s)?(0,i.translateI18n)("social.global.no"):s,onOk:function e(){if(r){r()}},onCancel:function e(){if(n){n()}}})}},621:function(e,t){},627:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(1);var o=p(n);var a=r(198);var i=p(a);var u=r(540);var s=p(u);var l=r(537);var c=r(541);var f=p(c);function p(e){return e&&e.__esModule?e:{default:e}}var d=i.default.bind(f.default);var v=function e(t){var r=t.prefixCls;return o.default.createElement("div",null,o.default.createElement("div",{className:d(r+"-layout-content")},o.default.createElement(l.RoundShape,{color:"#E0E0E0",style:{width:30,height:30}}),o.default.createElement("div",{className:d(r+"-content")},o.default.createElement("div",{className:d(r+"-comment")},o.default.createElement(l.TextBlock,{rows:2,color:"#E0E0E0"})))))};v.defaultProps={prefixCls:"post-comment"};t.default=(0,s.default)()(v)},628:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o;var a=r(1);var i=g(a);var u=r(2);var s=g(u);var l=r(541);var c=g(l);var f=r(198);var p=g(f);var d=r(521);var v=r(558);var m=g(v);var h=r(551);var y=r(92);var b=r(528);function g(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var O=p.default.bind(c.default);var P=(0,d.observer)(o=function(e){E(t,e);function t(){var e;var r,n,o;_(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++){i[u]=arguments[u]}return o=(r=(n=w(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n),n.handleUpVote=function(){var e=n.props.store;e.upVote()},n.handleDownVote=function(){var e=n.props.store;e.downVote()},r),w(n,o)}n(t,[{key:"render",value:function e(){var t=this.props,r=t.comment,n=t.prefixCls;var o=!(0,b.isLoggedIn)();return i.default.createElement("div",{className:O(n+"-layout-action")},i.default.createElement("div",{className:O(n+"-action-left")},i.default.createElement(m.default,{upvote:r.upvote,downvote:r.downvote,vote:r.vote,actionUpVote:this.handleUpVote,actionDownVote:this.handleDownVote,disabled:o})),i.default.createElement("div",{className:O(n+"-action-right")},i.default.createElement("div",{className:O(n+"-text-time")},(0,h.fullRelativeTime)(r.created_at))))}}]);return t}(i.default.Component))||o;P.defaultProps={prefixCls:"post-comment"};P.propTypes={comment:s.default.object,store:s.default.object.isRequired};t.default=(0,y.translate)(function(e){return e.namespaces})(P)},629:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o;var a=r(1);var i=E(a);var u=r(2);var s=E(u);var l=r(541);var c=E(l);var f=r(198);var p=E(f);var d=r(521);var v=r(532);var m=E(v);var h=r(527);var y=r(628);var b=E(y);var g=r(199);var _=r(534);var w=r(92);function E(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function P(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function k(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var C=p.default.bind(c.default);var j=(0,d.observer)(o=function(e){k(t,e);function t(){var e;var r,n,o;O(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++){i[u]=arguments[u]}return o=(r=(n=P(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n),n.handleViewMore=function(){var e=n.props.store;e.disableViewMore()},r),P(n,o)}n(t,[{key:"render",value:function e(){var t=this.props,r=t.store,n=t.prefixCls,o=t.t;var a=r.comment;var u=a.user?a.user:{avatar_url:h.LOGO};var s=(0,g.linkRoute)("/profile/:userID",{userID:(0,g.getValueObjectFromStringKey)(a,"user.id")});var l=r.content;var c=r.viewMore;return i.default.createElement("div",{className:C(n+"-layout-content")},i.default.createElement(m.default,{url:u.avatar_url}),i.default.createElement("div",{className:C(n+"-content")},i.default.createElement("div",{className:C(n+"-comment")},i.default.createElement(_.Link,{to:s},i.default.createElement("div",{className:C(n+"-name")},u.name)),i.default.createElement("div",{className:C(n+"-content-comment"),dangerouslySetInnerHTML:{__html:l}}),c&&i.default.createElement("div",{className:C(n+"-content-view-more"),onClick:this.handleViewMore},o("social.home.post_item.view_more"))),i.default.createElement(b.default,{comment:a,store:r})))}}]);return t}(i.default.Component))||o;j.defaultProps={prefixCls:"post-comment"};j.propTypes={store:s.default.object.isRequired};t.default=(0,w.translate)(function(e){return e.namespaces})(j)},631:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o;var a=r(1);var i=_(a);var u=r(2);var s=_(u);var l=r(541);var c=_(l);var f=r(198);var p=_(f);var d=r(521);var v=r(629);var m=_(v);var h=r(627);var y=_(h);var b=r(92);var g=r(199);function _(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function E(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function O(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var P=p.default.bind(c.default);var k=(0,d.observer)(o=function(e){O(t,e);function t(){var e;var r,n,o;w(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++){i[u]=arguments[u]}return o=(r=(n=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n),n.loadMore=function(){if(n.props.store.isLoadMore){n.props.store.getComments()}},r),E(n,o)}n(t,[{key:"componentDidMount",value:function e(){this.props.store.getComments(2)}},{key:"render",value:function e(){var t=this.props.store,r=t.comments,n=t.isLoading,o=t.isLoadMore;var a=this.props,u=a.t,s=a.prefixCls;return i.default.createElement("div",null,i.default.createElement("div",{className:P(s+"-container-comment")},o&&!(0,g.isEmptyArr)(r)&&i.default.createElement("div",{className:P(s+"-text-load-more"),onClick:this.loadMore},u("social.home.post.comment_load_more")),n&&i.default.createElement(y.default,null),!(0,g.isEmptyArr)(r)?r.map(function(e,t){return i.default.createElement(m.default,{store:e,key:t})}):n&&i.default.createElement("div",null,i.default.createElement(y.default,null))))}}]);return t}(i.default.Component))||o;k.defaultProps={prefixCls:"post-comment"};k.propTypes={store:s.default.object.isRequired};t.default=(0,b.translate)(function(e){return e.namespaces})(k)},633:function(e,t,r){e.exports={"editor-comment-layout-editor":"__2sA95t","editor-comment-container":"__1XXRmy","editor-comment-editor":"__2gHum7","editor-comment-border":"__2NlD2p","editor-comment-uploading-comment":"__1ai2ON","editor-comment-disable":"__1u--4X","editor-comment-uploading":"__16xzvA","editor-comment-signin-to-comment":"__1AIPB9"}},634:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(206);var o=j(n);var a=r(553);var i=j(a);var u=r(522);var s=j(u);var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var c;r(205);r(552);r(526);var f=r(1);var p=j(f);var d=r(2);var v=j(d);var m=r(633);var h=j(m);var y=r(198);var b=j(y);var g=r(529);var _=r(532);var w=j(_);var E=r(527);var O=r(92);var P=r(521);var k=r(528);var C=r(531);function j(e){return e&&e.__esModule?e:{default:e}}function M(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function x(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function I(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function D(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var T=b.default.bind(h.default);var R=p.default.createElement(s.default,{type:"loading",style:{fontSize:24},spin:true});var A=(0,P.observer)(c=function(e){D(t,e);function t(){var e;var r,n,o;x(this,t);for(var a=arguments.length,u=Array(a),s=0;s<a;s++){u[s]=arguments[s]}return o=(r=(n=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n),n._onFocus=function(){var e=n.props.store;e.setFocusEditor(true)},n._onBlur=function(){var e=n.props.store;e.setFocusEditor(false)},n._checkEmpty=function(){if(n._ref.innerHTML=="<br>"){n._ref.innerHTML=""}},n.uploadSuccess=function(e){var t=n.props.store;n._onBlur();n._ref.innerHTML="";t.reset();n.props.addComment(e)},n.setContent=function(){var e=n.props.store;setTimeout(function(){e.setContent(n._ref.innerHTML);e.setLineNumber(n._ref.childElementCount)},100)},n.onKeyPress=function(e){var t=n.props.store;if(e.which===13&&!e.shiftKey){t.addComment({value:t.content},n.uploadSuccess);e.preventDefault()}n._checkEmpty();n.setContent()},n.handlePaste=function(e){e.stopPropagation();e.preventDefault();var t=e.clipboardData||window.clipboardData;var r=t.getData("text/plain");r=(0,C.convertDataPastedEditor)(r);document.execCommand("insertHtml",false,r);n.setContent()},n.renderMessageError=function(e){return p.default.createElement(i.default,{style:{marginTop:20,marginBottom:20},message:e,type:"error",showIcon:true})},n.renderEditor=function(){var e;var t=n.props,r=t.t,o=t.store,a=t.prefixCls,i=t.account;if(!(0,k.isLoggedIn)()){return p.default.createElement("div",{className:T(a+"-signin-to-comment"),onClick:function e(){(0,k.redirectSignIn)()}},r("social.editor_comment.form.button_signin_to_comment"))}var u=i.joined,s=i.isJoining,l=i.onJoin;if(!u){return p.default.createElement("div",{className:T(a+"-signin-to-comment"),onClick:s?null:l},r("social.editor_comment.form.button_join_to_comment"))}var c=o.isFocus,f=o.isUploading;return p.default.createElement("div",{className:T((e={},M(e,a+"-editor",true),M(e,a+"-focus",c),M(e,a+"-border",c||f),M(e,a+"-uploading-comment",f),M(e,a+"-disable",f),e)),contentEditable:!f,onFocus:n._onFocus,onBlur:n._onBlur,ref:function e(t){n._ref=t},placeholder:r("social.editor_comment.form.placeholder"),onKeyPress:n.onKeyPress,onPaste:n.handlePaste})},r),I(n,o)}l(t,[{key:"render",value:function e(){var t=this.props,r=t.account,n=t.style,a=t.store,i=t.prefixCls;var u=a.isUploading;var s=r&&r.avatar_url?r.avatar_url:E.LOGO;return p.default.createElement("div",{className:T(i+"-layout-editor"),style:n},p.default.createElement("div",{className:T(i+"-container")},p.default.createElement(w.default,{url:s,style:{cursor:"pointer"}}),this.renderEditor(),u&&p.default.createElement("div",{className:T(i+"-uploading")},p.default.createElement(o.default,{indicator:R}))))}}]);return t}(p.default.Component))||c;A.defaultProps={prefixCls:"editor-comment"};A.propTypes={addComment:v.default.func,store:v.default.object.isRequired,style:v.default.object};t.default=(0,O.translate)(function(e){return e.namespaces})((0,g.withAccount)(A))},635:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o;var a=r(1);var i=y(a);var u=r(2);var s=y(u);var l=r(521);var c=r(634);var f=y(c);var p=r(631);var d=y(p);var v=r(566);var m=y(v);var h=r(565);function y(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var w=(0,l.observer)(o=function(e){_(t,e);function t(){var e;var r,n,o;b(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++){i[u]=arguments[u]}return o=(r=(n=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n),n.addComment=function(e){var t=n.props.storeComment;if(!t.isExistedComment(e)){t.addComment(e);n.props.incNumberComment()}},r),g(n,o)}n(t,[{key:"componentDidMount",value:function e(){var t=this;var r=this.props.post;var n=r.merchant.sub_domain+":"+h.CREATE_COMMENT;m.default.on(n,function(e){var n=e.comment;if(n.post_id==r.id){t.addComment(n)}})}},{key:"render",value:function e(){var t=this.props,r=t.storeComment,n=t.storeEditorComment,o=t.hideListComment,a=t.hideEditorComment;return i.default.createElement("div",null,!o&&i.default.createElement(d.default,{store:r}),!a&&i.default.createElement(f.default,{style:{marginTop:"10px"},store:n,addComment:this.addComment}))}}]);return t}(i.default.Component))||o;w.propTypes={storeComment:s.default.object.isRequired,storeEditorComment:s.default.object.isRequired,post:s.default.object.isRequired,hideListComment:s.default.bool,hideEditorComment:s.default.bool};t.default=w},636:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(522);var o=O(n);var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i;r(526);var u=r(1);var s=O(u);var l=r(2);var c=O(l);var f=r(530);var p=O(f);var d=r(198);var v=O(d);var m=r(521);var h=r(200);var y=r(558);var b=O(y);var g=r(570);var _=O(g);var w=r(92);var E=r(529);function O(e){return e&&e.__esModule?e:{default:e}}function P(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function k(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function C(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}function j(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var M=v.default.bind(p.default);var x=function e(t){var r=t.totalComments,n=r===undefined?0:r,o=t.disabled,a=t.prefixCls;return s.default.createElement("div",{className:M(a+"-action-comment",j({},a+"-disabled",o))},s.default.createElement("div",{className:M(a+"-text-comment")},n),(0,h.translateI18n)("social.home.post_item.comment"))};var I=(0,m.observer)(i=function(e){C(t,e);function t(){var e;var r,n,o;P(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++){i[u]=arguments[u]}return o=(r=(n=k(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n),n.handleUpVote=function(){var e=n.props.store;e.upVote()},n.handleDownVote=function(){var e=n.props.store;e.downVote()},r),k(n,o)}a(t,[{key:"render",value:function e(){var t=this.props,r=t.post,n=t.prefixCls,a=t.t,i=t.handleMark,u=t.account;var l=!u.acceptAction;return s.default.createElement("div",{className:M(n+"-layout-action")},s.default.createElement("div",{className:M(n+"-action-left")},s.default.createElement(b.default,{upvote:r.upvote,downvote:r.downvote,vote:r.vote,actionUpVote:this.handleUpVote,actionDownVote:this.handleDownVote,disabled:l}),s.default.createElement("div",{className:M(n+"-divider",n+"-vertical")}),s.default.createElement(x,{totalComments:r.num_comments,disabled:l})),s.default.createElement("div",{className:M(n+"-action-right",j({},n+"-disabled",l))},s.default.createElement(_.default,{title:a("social.home.post_item.mark")},s.default.createElement(o.default,{type:"star",className:M(j({},n+"-active-mark",r.isBookmarked)),onClick:l?null:i}))))}}]);return t}(s.default.Component))||i;I.defaultProps={prefixCls:"post"};x.defaultProps={prefixCls:"post"};I.propTypes={post:c.default.object,store:c.default.object,handleMark:c.default.func};x.propTypes={totalComments:c.default.number};t.default=(0,w.translate)(function(e){return e.namespaces})((0,E.withAccount)(I))},638:function(e,t,r){},640:function(e,t,r){},641:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(522);var o=d(n);var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();r(526);var u=r(1);var s=d(u);var l=r(2);var c=d(l);var f=r(701);var p=d(f);r(640);r(638);function d(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var y=function e(t){var r=t.onClick;return s.default.createElement("div",{className:"container-next"},s.default.createElement("div",{className:"next",onClick:r},s.default.createElement(o.default,{type:"right",style:{fontSize:"40px"}})))};var b=function e(t){var r=t.onClick;return s.default.createElement("div",{className:"container-prev"},s.default.createElement("div",{className:"prev",onClick:r},s.default.createElement(o.default,{type:"left",style:{fontSize:"40px"}})))};var g=function(e){h(t,e);function t(e,r){v(this,t);return m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}i(t,[{key:"render",value:function e(){return s.default.createElement(p.default,a({nextArrow:s.default.createElement(y,null),prevArrow:s.default.createElement(b,null)},this.props.settings),this.props.children)}}]);return t}(s.default.Component);g.propTypes={settings:c.default.object.isRequired};t.default=g},642:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(543);var o=g(n);var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i;r(545);var u=r(1);var s=g(u);var l=r(2);var c=g(l);var f=r(530);var p=g(f);var d=r(198);var v=g(d);var m=r(521);var h=r(199);var y=r(641);var b=g(y);function g(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var O=v.default.bind(p.default);var P=(0,m.observer)(i=function(e){E(t,e);function t(){var e;var r,n,o;_(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++){i[u]=arguments[u]}return o=(r=(n=w(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n),n.state={isReview:false,reviewImage:""},n.numberClick=0,n.handleCancel=function(){n.setState({isReview:false})},n.handleReviewImage=function(e){n.setState({reviewImage:e,isReview:true})},n.onDoubleClick=function(e){if(n.numberClick===1){n.handleReviewImage(e)}else{if(n.numberClick===0){n.numberClick=1;setTimeout(function(){n.numberClick=0},250)}}},r),w(n,o)}a(t,[{key:"render",value:function e(){var t=this;var r=this.props,n=r.images,a=r.prefixCls;if((0,h.isEmptyArr)(n)){return s.default.createElement("div",null)}else{var i={dots:true,infinite:true,speed:500,slidesToShow:1,slidesToScroll:1};var u=this.state,l=u.isReview,c=u.reviewImage;return s.default.createElement("div",{className:O(a+"-layout-image"),style:{marginBottom:n.length>1?"40px":0}},s.default.createElement(b.default,{settings:i},n.map(function(e,r){return s.default.createElement("div",{key:r},s.default.createElement("div",{className:O(a+"-image"),onClick:function r(){return t.onDoubleClick(e.url)},style:{background:(0,h.convertUrlImageBackground)(e.url)}}))})),s.default.createElement(o.default,{visible:l,footer:null,onCancel:this.handleCancel,bodyStyle:{padding:0},width:800},s.default.createElement("img",{style:{width:"100%"},src:c})))}}}]);return t}(s.default.Component))||i;P.defaultProps={prefixCls:"post"};P.propTypes={images:c.default.array.isRequired};t.default=P},643:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o;var a=r(1);var i=y(a);var u=r(2);var s=y(u);var l=r(530);var c=y(l);var f=r(198);var p=y(f);var d=r(521);var v=r(642);var m=y(v);var h=r(92);function y(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var w=p.default.bind(c.default);var E=(0,d.observer)(o=function(e){_(t,e);function t(){var e;var r,n,o;b(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++){i[u]=arguments[u]}return o=(r=(n=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n),n.handleViewMore=function(){var e=n.props.store;e.disableViewMore()},r),g(n,o)}n(t,[{key:"render",value:function e(){var t=this;var r=this.props,n=r.post,o=r.prefixCls,a=r.store,u=r.t;var s=a.content;var l=a.viewMore;return i.default.createElement("div",{className:w(o+"-content")},i.default.createElement("div",{dangerouslySetInnerHTML:{__html:s},className:w(o+"-content-body"),ref:function e(r){t._ref=r}}),l&&i.default.createElement("div",{className:w(o+"-content-view-more"),onClick:this.handleViewMore},u("social.home.post_item.view_more")),i.default.createElement(m.default,{images:n.images}))}}]);return t}(i.default.Component))||o;E.defaultProps={prefixCls:"post"};E.propTypes={post:s.default.object.isRequired,store:s.default.object.isRequired};t.default=(0,h.translate)(function(e){return e.namespaces})(E)},647:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(673);var o=M(n);var a=r(522);var i=M(a);var u=r(671);var s=M(u);var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var c;r(703);r(526);r(702);var f=r(1);var p=M(f);var d=r(2);var v=M(d);var m=r(532);var h=M(m);var y=r(530);var b=M(y);var g=r(198);var _=M(g);var w=r(551);var E=r(534);var O=r(529);var P=r(521);var k=r(199);var C=r(92);var j=r(527);function M(e){return e&&e.__esModule?e:{default:e}}function x(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function I(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function D(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var T=_.default.bind(b.default);var R=(0,P.observer)(c=function(e){D(t,e);function t(){var e;var r,n,o;x(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++){i[u]=arguments[u]}return o=(r=(n=I(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n),n.renderActionHeader=function(){var e=n.props,t=e.t,r=e.post,o=e.handleMark,a=e.handleDelete,i=e.handleEdit,u=e.account;var l=r.creator;var c=r.isBookmarked?t("social.home.post_item.dropdown_remove_bookmark"):t("social.home.post_item.dropdown_add_bookmark");var f=l&&l.id===u.id;return p.default.createElement(s.default,null,f&&p.default.createElement(s.default.Item,{key:"0",onClick:i},t("social.home.post_item.dropdown_edit")),f&&p.default.createElement(s.default.Item,{key:"1",onClick:a},t("social.home.post_item.dropdown_delete")),f&&p.default.createElement(s.default.Divider,null),p.default.createElement(s.default.Item,{key:"3",onClick:o},c))},r),I(n,o)}l(t,[{key:"render",value:function e(){var t=this.props,r=t.post,n=t.linkDetail,a=t.linkProfile,u=t.prefixCls,s=t.account;var l=(0,k.getValueObjectFromStringKey)(r,"creator.avatar_url")?(0,k.getValueObjectFromStringKey)(r,"creator.avatar_url"):j.LOGO;var c=(0,k.getValueObjectFromStringKey)(r,"creator.name")?(0,k.getValueObjectFromStringKey)(r,"creator.name"):j.LOGO;var f=(0,k.randomStr)();var d=!s.acceptAction;return p.default.createElement("div",{className:T(u+"-header")},p.default.createElement("div",{className:T(u+"-creator")},p.default.createElement(h.default,{url:l}),p.default.createElement("div",{className:T(u+"-creator-content")},p.default.createElement(E.Link,{to:a},p.default.createElement("div",{className:T(u+"-name")},c)),p.default.createElement(E.Link,{to:n},p.default.createElement("div",{className:T(u+"-text-time")},(0,w.relativeTime)(r.created_at))))),!d&&p.default.createElement("div",{className:T(u+"-action")},p.default.createElement("div",{className:T(u+"-action-dropdown"),id:"dropdown-"+f},p.default.createElement(o.default,{overlay:this.renderActionHeader(),trigger:["click"],placement:"bottomRight",getPopupContainer:function e(){return document.getElementById("dropdown-"+f)}},p.default.createElement(i.default,{type:"ellipsis",className:T(u+"-action-icon")})))))}}]);return t}(p.default.Component))||c;R.defaultProps={prefixCls:"post"};R.propTypes={post:v.default.object.isRequired,linkDetail:v.default.string.isRequired,linkProfile:v.default.string.isRequired,handleMark:v.default.func,handleDelete:v.default.func,handleEdit:v.default.func};t.default=(0,C.translate)(function(e){return e.namespaces})((0,O.withAccount)(R))},649:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(543);var o=w(n);var a=r(574);var i=w(a);var u=r(522);var s=w(u);var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var c;r(545);r(592);r(526);var f=r(1);var p=w(f);var d=r(2);var v=w(d);var m=r(542);var h=w(m);var y=r(198);var b=w(y);var g=r(521);var _=r(199);function w(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function O(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function P(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var k=b.default.bind(h.default);var C=(0,g.observer)(c=function(e){P(t,e);function t(){var e;var r,n,o;E(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++){i[u]=arguments[u]}return o=(r=(n=O(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n),n.state={isReview:false,reviewImage:""},n.handleCancel=function(){n.setState({isReview:false})},n.handleReviewImage=function(e){n.setState({reviewImage:e,isReview:true})},n.renderAction=function(){var e=n.props,t=e.image,r=e.prefixCls,o=e.removeImage;var a=(0,_.isEmpty)(t.url)?"":t.url;return p.default.createElement("div",{className:k(r+"-image-action")},p.default.createElement("div",{className:k(r+"-image-action-view"),onClick:function e(){return n.handleReviewImage(a)}},p.default.createElement(s.default,{type:"eye-o"})),p.default.createElement("div",{className:k(r+"-image-action-remove"),onClick:function e(){return o(t)}},p.default.createElement(s.default,{type:"delete"})))},r),O(n,o)}l(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.image,n=t.store;if((0,_.isEmpty)(r.url)){n.uploadImage(r)}}},{key:"render",value:function e(){var t=this.props,r=t.image,n=t.prefixCls;var a=this.state,u=a.isReview,s=a.reviewImage;var l=(0,_.isEmpty)(r.url)?"":r.url;return p.default.createElement("div",{className:k(n+"-container-image")},p.default.createElement("div",{className:k(n+"-image"),style:{background:(0,_.convertUrlImageBackground)(l)}},this.renderAction()),r.isUploading&&p.default.createElement("div",{className:k(n+"-loading")},p.default.createElement(i.default,{percent:r.percentComplete,size:"small",status:"active",showInfo:false})),p.default.createElement(o.default,{visible:u,footer:null,onCancel:this.handleCancel,bodyStyle:{padding:0},width:800},p.default.createElement("img",{style:{width:"100%"},src:s})))}}]);return t}(p.default.Component))||c;C.defaultProps={prefixCls:"editor-post"};C.propTypes={store:v.default.object.isRequired,image:v.default.object.isRequired,removeImage:v.default.func};t.default=C},650:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(522);var o=w(n);var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i;r(526);var u=r(1);var s=w(u);var l=r(2);var c=w(l);var f=r(542);var p=w(f);var d=r(198);var v=w(d);var m=r(92);var h=r(521);var y=r(649);var b=w(y);var g=r(569);var _=w(g);function w(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function O(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function P(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var k=v.default.bind(p.default);var C=(0,h.observer)(i=function(e){P(t,e);function t(){var e;var r,n,a;E(this,t);for(var i=arguments.length,u=Array(i),l=0;l<i;l++){u[l]=arguments[l]}return a=(r=(n=O(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n),n.onSelectImage=function(e){var t=n.props.onSelectImageToUpload;t(e.target.files)},n.removeImage=function(e){var t=n.props.store;t.removeImage(e)},n.renderAddImage=function(){var e=n.props.prefixCls;return s.default.createElement("div",{className:k(e+"-container-image")},s.default.createElement(_.default,{type:".jpg,.png,.gif",multiple:true,onChange:n.onSelectImage},s.default.createElement("div",{className:k(e+"-image-add")},s.default.createElement(o.default,{type:"plus-circle-o"}))))},r),O(n,a)}a(t,[{key:"render",value:function e(){var t=this;var r=this.props,n=r.store,o=r.images,a=r.prefixCls;return s.default.createElement("div",{className:k(a+"-layout-image")},s.default.createElement("div",{className:k(a+"-scrollable")},o.map(function(e,r){return s.default.createElement(b.default,{key:r,store:n,image:e,removeImage:t.removeImage})}),this.renderAddImage()))}}]);return t}(s.default.Component))||i;C.defaultProps={prefixCls:"editor-post"};C.propTypes={store:c.default.object.isRequired,images:c.default.array.isRequired,onSelectImageToUpload:c.default.func};t.default=(0,m.translate)(function(e){return e.namespaces})(C)},651:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(533);var o=g(n);var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i;r(535);var u=r(1);var s=g(u);var l=r(2);var c=g(l);var f=r(542);var p=g(f);var d=r(198);var v=g(d);var m=r(92);var h=r(521);var y=r(569);var b=g(y);function g(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var O=v.default.bind(p.default);var P=(0,h.observer)(i=function(e){E(t,e);function t(){var e;var r,n,o;_(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++){i[u]=arguments[u]}return o=(r=(n=w(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n),n.onSelectImage=function(e){var t=n.props.onSelectImageToUpload;t(e.target.files)},r),w(n,o)}a(t,[{key:"render",value:function e(){var t=this.props,r=t.t,n=t.prefixCls;return s.default.createElement("div",{className:O(n+"-layout-action")},s.default.createElement("div",{className:O(n+"-action-photo")},s.default.createElement(b.default,{type:".jpg,.png,.gif",multiple:true,onChange:this.onSelectImage},s.default.createElement(o.default,{icon:"picture"},r("social.editor.action.photo")))))}}]);return t}(s.default.Component))||i;P.defaultProps={prefixCls:"editor-post"};P.propTypes={onSelectImageToUpload:c.default.func.isRequired};t.default=(0,m.translate)(function(e){return e.namespaces})(P)},652:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.uploadImageApi=a;var n=r(136);var o=r(528);function a(e,t,r,a){var i=n.MERCHANT_API_URL+"v1/image";var u=new FormData;u.append("image",e);var s=new XMLHttpRequest;s.addEventListener("load",t,false);s.upload.onprogress=r;s.addEventListener("error",a,false);s.open("POST",i);s.setRequestHeader("Authorization","Bearer "+(0,o.getToken)());s.send(u)}},653:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function e(t,r,n){if(t<r)return r;if(t>n)return n;return t};var i=function e(){var t=this;o(this,e);this.minimum=.08;this.value=null;this.callbackValue=null;this.config={trickle:true,trickleRate:.02,trickleSpeed:800};this.init=function(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};t.config=n({},t.config,r);t.callbackValue=e};this.start=function(){if(!t.value)t.set(0);if(t.config.trickle){t.run=setInterval(function(){if(!t.isInited)return;t.trickle()},t.config.trickleSpeed)}};this.inc=function(e){var r=t.value;if(!r){return t.start()}else{if(typeof e!=="number"){e=(1-r)*a(Math.random()*r,.1,.95)}r=a(r+e,0,.994);return t.set(r)}};this.trickle=function(){t.inc(Math.random()*t.config.trickleRate)};this.set=function(e){if(e<=t.minimum){t.value=t.minimum}else{t.value=e}if(!t.isInited)return;t.callbackValue(t.value)};this.isInited=function(){return t.callbackValue};this.done=function(){t.value=1;if(!t.isInited)return;t.callbackValue(t.value);if(t.run){clearInterval(t.run)}}};t.default=new i},654:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var a,i,u,s,l,c,f,p,d,v,m,h,y;var b=r(524);var g=r(523);var _=r(546);var w=r(653);var E=M(w);var O=r(200);var P=r(652);var k=r(525);var C=r(531);var j=r(199);function M(e){return e&&e.__esModule?e:{default:e}}function x(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a);var u=i.value}catch(e){r(e);return}if(i.done){e(u)}else{return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)})}}return n("next")})}}function I(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++){r[t]=e[t]}return r}else{return Array.from(e)}}function D(e,t,r,n){if(!r)return;Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function T(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function R(e,t,r,n,o){var a={};Object["ke"+"ys"](n).forEach(function(e){a[e]=n[e]});a.enumerable=!!a.enumerable;a.configurable=!!a.configurable;if("value"in a||a.initializer){a.writable=true}a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a);if(o&&a.initializer!==void 0){a.value=a.initializer?a.initializer.call(o):void 0;a.initializer=undefined}if(a.initializer===void 0){Object["define"+"Property"](e,t,a);a=null}return a}function A(e,t){throw new Error("Decorating class property failed. Please ensure that transform-class-properties is enabled.")}var N=(u=function(){function e(t){var r=this;T(this,e);D(this,"percentUpload",s,this);D(this,"isUploading",l,this);D(this,"error",c,this);D(this,"isFocus",f,this);D(this,"images",p,this);D(this,"content",d,this);D(this,"lineNumber",v,this);this.post={};D(this,"setFocusEditor",m,this);D(this,"addImages",h,this);D(this,"changeDataImages",y,this);this.getImageByFile=function(e){return r.images.filter(function(t){return e===t.file})[0]};this.getIndexImagesByFile=function(e){return r.images.indexOf(r.getImageByFile(e))};this.getIdImages=function(){return r.images.map(function(e){return e.id})};if(!(0,j.isEmpty)(t)){this.post=t;this.content=t.body;this.images=[].concat(I(t.images))}}o(e,[{key:"addPost",value:function(){var e=x(regeneratorRuntime.mark(function e(){var t=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var n,o,a;return regeneratorRuntime.wrap(function e(i){while(1){switch(i.prev=i.next){case 0:this.isUploading=true;this.error=null;E.default.init(function(e){t.percentUpload=e},{trickleRate:.1,trickleSpeed:500});E.default.set(0);E.default.start();n={body:this.content,image_ids:JSON.stringify(this.getIdImages())};i.prev=6;i.next=9;return(0,_.addPostApi)(n);case 9:o=i.sent;a=o.data;if((0,g.httpSuccess)(o.status)){setTimeout(function(){(0,b.runInAction)(function(){t.isUploading=false});(0,k.messageSuccess)((0,O.translateI18n)("social.home.post.upload_success"));if(r){r(a.data)}},400)}else{(0,b.runInAction)(function(){t.error=(0,g.messageHttpRequest)();t.isUploading=false})}i.next=17;break;case 14:i.prev=14;i.t0=i["catch"](6);(0,b.runInAction)(function(){t.error=(0,g.messageHttpRequest)(i.t0);t.isUploading=false});case 17:i.prev=17;E.default.done();return i.finish(17);case 20:case"end":return i.stop()}}},e,this,[[6,14,17,20]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"editPost",value:function(){var e=x(regeneratorRuntime.mark(function e(){var t=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var o,a,i;return regeneratorRuntime.wrap(function e(u){while(1){switch(u.prev=u.next){case 0:this.isUploading=true;this.error=null;E.default.init(function(e){t.percentUpload=e},{trickleRate:.1,trickleSpeed:500});E.default.set(0);E.default.start();o=n({},this.post,{body:this.content,image_ids:JSON.stringify(this.getIdImages())});u.prev=6;u.next=9;return(0,_.editPostApi)(o);case 9:a=u.sent;i=a.data;if((0,g.httpSuccess)(a.status)){setTimeout(function(){(0,b.runInAction)(function(){t.isUploading=false});(0,k.messageSuccess)((0,O.translateI18n)("social.home.post.upload_success"));if(r){r(i.data)}},400)}else{(0,b.runInAction)(function(){t.error=(0,g.messageHttpRequest)();t.isUploading=false})}u.next=17;break;case 14:u.prev=14;u.t0=u["catch"](6);(0,b.runInAction)(function(){t.error=(0,g.messageHttpRequest)(u.t0);t.isUploading=false});case 17:u.prev=17;E.default.done();return u.finish(17);case 20:case"end":return u.stop()}}},e,this,[[6,14,17,20]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"uploadImage",value:function e(t){var r=this;var o=n({},t);this.changeDataImages(o,{isUploading:true});var a=function e(){r.changeDataImages(t,{isUploading:false});var n=t.file?t.file.name:"";(0,k.messageWarning)((0,O.translateI18n)("social.editor.Noti.upload_image_error",{image_name:n}));r.removeImage(t)};var i=function e(t){var a=JSON.parse(t.currentTarget.responseText);r.changeDataImages(o,n({isUploading:false},a.data))};var u=function e(n){var o=Math.round(100*n.loaded/n.total);r.changeDataImages(t,{percentComplete:o})};(0,P.uploadImageApi)(t.file,i,u,a)}},{key:"removeImage",value:function e(t){this.images.splice(this.getIndexImagesByFile(t.file),1)}},{key:"reset",value:function e(){this.percentUpload=0;this.isUploading=false;this.error=null;this.isFocus=false;this.images=[];this.content=""}},{key:"setContent",value:function e(t){this.content=(0,C.convertDataEditor)(t)}},{key:"setLineNumber",value:function e(t){this.lineNumber=t}},{key:"isZoomText",get:function e(){return!(0,C.overMaxString)(this.content)&&!(0,C.overLineNumber)(this.content)}}]);return e}(),s=R(u.prototype,"percentUpload",[b.observable],{enumerable:true,initializer:function e(){return 0}}),l=R(u.prototype,"isUploading",[b.observable],{enumerable:true,initializer:function e(){return false}}),c=R(u.prototype,"error",[b.observable],{enumerable:true,initializer:function e(){return null}}),f=R(u.prototype,"isFocus",[b.observable],{enumerable:true,initializer:function e(){return false}}),p=R(u.prototype,"images",[b.observable],{enumerable:true,initializer:function e(){return[]}}),d=R(u.prototype,"content",[b.observable],{enumerable:true,initializer:function e(){return""}}),v=R(u.prototype,"lineNumber",[b.observable],{enumerable:true,initializer:function e(){return 0}}),R(u.prototype,"addPost",[b.action],Object.getOwnPropertyDescriptor(u.prototype,"addPost"),u.prototype),R(u.prototype,"editPost",[b.action],Object.getOwnPropertyDescriptor(u.prototype,"editPost"),u.prototype),m=R(u.prototype,"setFocusEditor",[b.action],{enumerable:true,initializer:function e(){var t=this;return function(e){t.isFocus=e}}}),R(u.prototype,"uploadImage",[b.action],Object.getOwnPropertyDescriptor(u.prototype,"uploadImage"),u.prototype),h=R(u.prototype,"addImages",[b.action],{enumerable:true,initializer:function e(){var t=this;return function(e){t.images=[].concat(I(t.images),I(e))}}}),y=R(u.prototype,"changeDataImages",[b.action],{enumerable:true,initializer:function e(){var t=this;return function(e,r){var o=t.getIndexImagesByFile(e.file);t.images[o]=n({},t.images[o],r)}}}),R(u.prototype,"removeImage",[b.action],Object.getOwnPropertyDescriptor(u.prototype,"removeImage"),u.prototype),R(u.prototype,"reset",[b.action],Object.getOwnPropertyDescriptor(u.prototype,"reset"),u.prototype),R(u.prototype,"setContent",[b.action],Object.getOwnPropertyDescriptor(u.prototype,"setContent"),u.prototype),R(u.prototype,"setLineNumber",[b.action],Object.getOwnPropertyDescriptor(u.prototype,"setLineNumber"),u.prototype),R(u.prototype,"isZoomText",[b.computed],Object.getOwnPropertyDescriptor(u.prototype,"isZoomText"),u.prototype),u);t.default=N}}]);